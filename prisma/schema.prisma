generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model User {
  id                    String     @id @default(cuid())
  email                 String     @unique
  name                  String?
  surname               String?
  phone                 String?
  password              String
  salt                  String
  last_login_ip_address String
  current_logged_in_at  DateTime   @default(now())
  last_logged_in_at     DateTime   @default(now())
  created_at            DateTime   @default(now())
  is_admin              Boolean    @default(false)
  is_item_owner         Boolean    @default(false)
  items                 Items[]    @relation("ItemOwner")
  bookmarks             Bookmark[]
  mediaFiles            Media[]    @relation("UserMedia")
}

model Items {
  id             String            @id @default(cuid())
  title          String
  description    String
  price          Float
  address        String
  city           String
  district       String
  bedroom_count  Int
  bathroom_count Int
  size           Float
  year_built     Int
  fixtures       String
  status         String            @default("active")
  item_category  ItemsCategories[]
  for_sale       Boolean           @default(true)
  latitude       Float
  longitude      Float
  created_at     DateTime          @default(now())
  updated_at     DateTime          @updatedAt
  owner_id       String
  owner          User              @relation("ItemOwner", fields: [owner_id], references: [id])
  images         Media[]
  bookmarks      Bookmark[]
}

model ItemsCategories {
  id    String  @id @default(cuid())
  name  String
  items Items[]
}

model Media {
  id         String   @id @default(cuid())
  name       String
  path       String
  item_id    String?
  items      Items?   @relation(fields: [item_id], references: [id])
  user_id    String
  user       User     @relation("UserMedia", fields: [user_id], references: [id])
  created_at DateTime @default(now())
}

model Bookmark {
  id         String   @id @default(cuid())
  user_id    String
  item_id    String
  user       User     @relation(fields: [user_id], references: [id])
  items      Items    @relation(fields: [item_id], references: [id])
  created_at DateTime @default(now())
}

model CMSContent {
  id               String           @id @default(cuid())
  title            String
  description      String?
  status           String // Draft, Published, Archived, etc.
  created_at       DateTime         @default(now())
  updated_at       DateTime         @updatedAt
  metaTitle        String?
  meta_description String?
  meta_keywords    String?
  sections         ContentSection[]
}

model ContentSection {
  id             String     @id @default(cuid())
  title          String
  body           String
  order          Int
  // customFields Json?
  createdAt      DateTime   @default(now())
  cms_content    CMSContent @relation(fields: [cms_content_id], references: [id])
  cms_content_id String
}
